<form (ngSubmit)="onSubmit()" [formGroup]="formGroup" class="flex flex-col gap-6">
  @for (item of formModel().items; track item.label) {
    @switch (item.type) {
      @case ('text') {
        <div>
          <label [for]="item.controlName">
            <span>{{ item.label }}</span>
          </label>
          <input
            [attr.id]="item.controlName"
            [formControlName]="item.controlName"
            [placeholder]="item?.placeholder"
            pInputText
          />
        </div>
      }
      @case ('checkbox') {
        <div class="flex items-center gap-2">
          <p-checkbox [binary]="true" [formControlName]="item.controlName" [inputId]="item.controlName" />
          <label [for]="item.controlName">
            <span>{{ item.label }}</span>
          </label>
        </div>
      }
      @case ('radio') {
        <div class="flex flex-col gap-4">
          <label [id]="item.controlName + '_label'" class="font-bold">{{ item.label }}</label>
          <div [attr.aria-labelledby]="item.controlName + '_label'" class="flex flex-col gap-2" role="radiogroup">
            @for (option of item.options; track option.value; let i = $index) {
              <div class="flex items-center gap-2">
                <p-radio-button
                  [formControlName]="item.controlName"
                  [inputId]="item.controlName + '_' + i"
                  [name]="item.controlName"
                  [value]="option.value"
                />
                <label [for]="item.controlName + '_' + i">
                  <span>{{ option.label }}</span>
                </label>
              </div>
            }
          </div>
        </div>
      }
      @case ('select') {
        <div>
          <label [for]="item.controlName">
            <span>{{ item.label }}</span>
          </label>
          <p-select
            [formControlName]="item.controlName"
            [inputId]="item.controlName"
            [options]="item.options"
            optionLabel="label"
            optionValue="value"
          />
        </div>
      }
      @case ('textarea') {
        <div>
          <label [for]="item.controlName">
            <span>{{ item.label }}</span>
          </label>
          <textarea [attr.id]="item.controlName" [formControlName]="item.controlName" class="h-24" pTextarea></textarea>
        </div>
      }
      @case ('date') {
        <div>
          <label [for]="item.controlName">
            <span>{{ item.label }}</span>
          </label>
          <p-datepicker
            [formControlName]="item.controlName"
            [inputId]="item.controlName"
            [invalid]="hasErrors(item.controlName)"
          />
        </div>
      }
      @case ('range') {
        <div>
          <label [for]="item.controlName">
            <span>{{ item.label }}</span>
          </label>
          <div class="flex gap-4 items-center">
            <p-slider [formControlName]="item.controlName" [id]="item.controlName" class="flex-1" />
            <div class="range-value">{{ formGroup.get(item.controlName)?.value }}</div>
          </div>
        </div>
      }
    }
  }
  <p-button
    [disabled]="!formGroup.valid"
    [ngClass]="!formGroup.valid ? 'cursor-not-allowed' : ''"
    [outlined]="true"
    type="submit"
  >
    {{ formModel().submitButtonLabel }}
  </p-button>
</form>
